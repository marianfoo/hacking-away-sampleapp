{"version":3,"file":"TodoModel.js","names":["makeAutoObservable","observe","TodoService","TodoItem","TodoModel","JSONModel","constructor","url","todoItems","completedCount","notCompletedCount","new","edit","getData","updateBindings","model","ODataModel","todoService","read","then","console","log","catch","resetNewTodo","oData","setUpdateTodo","todo","getTodoItem","id","find","item","getId","response","getTodos","data","results","map","filter","getCompleted","length","create","title","addTodo","getJSON","delete","todoItem","deleteTodo","update","updateTodo","updateTitle","setCompleted","setTitle"],"sources":["../../src/models/TodoModel.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-member-access,\n\t\t\t\t\t@typescript-eslint/no-unsafe-assignment,\n\t\t\t\t\t@typescript-eslint/no-unsafe-argument,\n\t\t\t\t\t@typescript-eslint/no-unsafe-call,\n\t\t\t\t\t@typescript-eslint/ban-ts-comment */\n\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport { makeAutoObservable, observe } from \"mobx\";\n\nimport ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport TodoService from \"../service/TodoService\";\nimport TodoItem from \"./TodoItem\";\n\nexport type todoModelData = {\n\ttodoItems: Array<TodoItem>;\n\tcompletedCount: number;\n\tnotCompletedCount: number;\n\tnew: TodoItem;\n\tedit: TodoItem;\n};\n\n/**\n * @namespace hacking.away.sampleapp.models\n */\nexport default class TodoModel extends JSONModel {\n\tprivate url: string;\n\tprivate todoService: TodoService;\n\tprivate oData: todoModelData;\n\tconstructor(url: string) {\n\t\tsuper({\n\t\t\ttodoItems: [],\n\t\t\tcompletedCount: 0,\n\t\t\tnotCompletedCount: 0,\n\t\t\tnew: new TodoItem(),\n\t\t\tedit: new TodoItem()\n\t\t});\n\n\t\tmakeAutoObservable(this.getData());\n\t\tobserve(this.getData(), () => {\n\t\t\tthis.updateBindings(true);\n\t\t});\n\n\t\tthis.url = url;\n\t\tconst model = new ODataModel(url);\n\t\tthis.todoService = new TodoService(model);\n\n\t\tthis.read()\n\t\t\t.then(() => {\n\t\t\t\tconsole.log(\"ok\");\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.log(\"nOk\");\n\t\t\t});\n\t}\n\tresetNewTodo() {\n\t\tthis.oData.new = new TodoItem();\n\t}\n\tsetUpdateTodo(todo: TodoItem) {\n\t\tthis.oData.edit = todo;\n\t}\n\tgetTodoItem(id: number) {\n\t\treturn this.oData.todoItems.find((item) => item.getId() === id);\n\t}\n\tasync read(): Promise<void> {\n\t\tconst response = await this.todoService.getTodos();\n\t\tthis.oData.todoItems = response.data.results.map((item) => new TodoItem(item));\n\t\tthis.oData.completedCount = this.oData.todoItems.filter((item) => item.getCompleted()).length || 0;\n\t\tthis.oData.notCompletedCount = this.oData.todoItems.filter((item) => !item.getCompleted()).length || 0;\n\t}\n\n\tasync create(title: string): Promise<void> {\n\t\tawait this.todoService.addTodo(new TodoItem({ title }).getJSON());\n\t\tawait this.read();\n\t}\n\n\tasync delete(todoItem: TodoItem): Promise<void> {\n\t\tawait this.todoService.deleteTodo(todoItem.getId());\n\t\tawait this.read();\n\t}\n\n\tasync update(todoItem: TodoItem): Promise<void> {\n\t\tawait this.todoService.updateTodo(todoItem.getJSON());\n\t\tawait this.read();\n\t}\n\tasync updateTitle(id: number, title: string): Promise<void> {\n\t\tconst todoItem = this.getTodoItem(id);\n\t\ttodoItem.setCompleted(false);\n\t\ttodoItem.setTitle(title);\n\t\tawait this.update(todoItem);\n\t}\n}\n"],"mappings":"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"}