{"version":3,"file":"BaseService.js","names":["BaseService","Object","constructor","model","setModel","getModel","odata","url","core","ajax","type","parameters","data","promise","Promise","resolve","reject","params","success","result","response","responseResult","error","get","post","put","delete"],"sources":["../../src/service/BaseService.ts"],"sourcesContent":["import Object from \"sap/ui/base/Object\";\nimport Filter from \"sap/ui/model/Filter\";\nimport ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport Sorter from \"sap/ui/model/Sorter\";\n\ntype odataMethods = \"read\" | \"create\" | \"update\" | \"remove\";\ntype parameters<T> = {\n\tcontext?: Record<string, unknown>;\n\turlParameters?: Record<string, string>;\n\tfilters?: Filter[];\n\tsorters?: Sorter[];\n\tsuccess?: (result: T, response: Response) => void;\n\terror?: (error: unknown) => void;\n\tbatchGroupId?: string;\n\tgroupId?: string;\n\tupdateAggregatedMessages?: boolean;\n};\ntype response<T> = {\n\tdata: T;\n\tresponse: unknown;\n};\n/**\n * @namespace hacking.away.sampleapp.service\n */\nexport default class BaseService extends Object {\n\tprotected model: ODataModel;\n\tconstructor(model: ODataModel) {\n\t\tsuper();\n\t\tif (model) {\n\t\t\tthis.setModel(model);\n\t\t}\n\t}\n\tpublic setModel(model: ODataModel): void {\n\t\tthis.model = model;\n\t}\n\tpublic getModel(): ODataModel {\n\t\treturn this.model;\n\t}\n\tpublic odata(url: string) {\n\t\tconst core = {\n\t\t\tajax: <T>(type: odataMethods, url: string, parameters: parameters<T>, data?: T): Promise<response<T>> => {\n\t\t\t\tconst promise = new Promise<response<T>>((resolve, reject) => {\n\t\t\t\t\tlet params: parameters<T> = {};\n\t\t\t\t\tif (parameters) {\n\t\t\t\t\t\tparams = parameters;\n\t\t\t\t\t}\n\t\t\t\t\tparams.success = (result: T, response): void => {\n\t\t\t\t\t\tconst responseResult: response<T> = {\n\t\t\t\t\t\t\tdata: result,\n\t\t\t\t\t\t\tresponse: response\n\t\t\t\t\t\t};\n\t\t\t\t\t\tresolve(responseResult);\n\t\t\t\t\t};\n\t\t\t\t\tparams.error = function (error: unknown) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t};\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tthis.model[type](url, data, params);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.model[type](url, params);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn promise;\n\t\t\t}\n\t\t};\n\t\treturn {\n\t\t\tget: <T>(params?: parameters<T>): Promise<response<T>> => core.ajax(\"read\", url, params),\n\t\t\tpost: <T>(data: T, params?: parameters<T>): Promise<response<T>> => core.ajax(\"create\", url, params, data),\n\t\t\tput: <T>(data: T, params?: parameters<T>): Promise<response<T>> => core.ajax(\"update\", url, params, data),\n\t\t\tdelete: <T>(params?: parameters<T>): Promise<response<T>> => core.ajax(\"remove\", url, params)\n\t\t};\n\t}\n}\n"],"mappings":";EAqBA;AACA;AACA;EAFA,MAGqBA,WAAW,GAASC,MAAM;IAE9CC,WAAW,wBAACC,KAAiB,EAAE;MAC9B;MACA,IAAIA,KAAK,EAAE;QACV,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC;MACrB;IACD,CAAC;IACMC,QAAQ,qBAACD,KAAiB,EAAQ;MACxC,IAAI,CAACA,KAAK,GAAGA,KAAK;IACnB,CAAC;IACME,QAAQ,uBAAe;MAC7B,OAAO,IAAI,CAACF,KAAK;IAClB,CAAC;IACMG,KAAK,kBAACC,GAAW,EAAE;MACzB,MAAMC,IAAI,GAAG;QACZC,IAAI,EAAE,CAAIC,IAAkB,EAAEH,GAAW,EAAEI,UAAyB,EAAEC,IAAQ,KAA2B;UACxG,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAAc,CAACC,OAAO,EAAEC,MAAM,KAAK;YAC7D,IAAIC,MAAqB,GAAG,CAAC,CAAC;YAC9B,IAAIN,UAAU,EAAE;cACfM,MAAM,GAAGN,UAAU;YACpB;YACAM,MAAM,CAACC,OAAO,GAAG,CAACC,MAAS,EAAEC,QAAQ,KAAW;cAC/C,MAAMC,cAA2B,GAAG;gBACnCT,IAAI,EAAEO,MAAM;gBACZC,QAAQ,EAAEA;cACX,CAAC;cACDL,OAAO,CAACM,cAAc,CAAC;YACxB,CAAC;YACDJ,MAAM,CAACK,KAAK,GAAG,UAAUA,KAAc,EAAE;cACxCN,MAAM,CAACM,KAAK,CAAC;YACd,CAAC;YACD,IAAIV,IAAI,EAAE;cACT,IAAI,CAACT,KAAK,CAACO,IAAI,CAAC,CAACH,GAAG,EAAEK,IAAI,EAAEK,MAAM,CAAC;YACpC,CAAC,MAAM;cACN,IAAI,CAACd,KAAK,CAACO,IAAI,CAAC,CAACH,GAAG,EAAEU,MAAM,CAAC;YAC9B;UACD,CAAC,CAAC;UACF,OAAOJ,OAAO;QACf;MACD,CAAC;MACD,OAAO;QACNU,GAAG,EAAMN,MAAsB,IAA2BT,IAAI,CAACC,IAAI,CAAC,MAAM,EAAEF,GAAG,EAAEU,MAAM,CAAC;QACxFO,IAAI,EAAE,CAAIZ,IAAO,EAAEK,MAAsB,KAA2BT,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAEF,GAAG,EAAEU,MAAM,EAAEL,IAAI,CAAC;QAC1Ga,GAAG,EAAE,CAAIb,IAAO,EAAEK,MAAsB,KAA2BT,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAEF,GAAG,EAAEU,MAAM,EAAEL,IAAI,CAAC;QACzGc,MAAM,EAAMT,MAAsB,IAA2BT,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAEF,GAAG,EAAEU,MAAM;MAC7F,CAAC;IACF;EAAC;EAAA,OA/CmBjB,WAAW;AAAA"}